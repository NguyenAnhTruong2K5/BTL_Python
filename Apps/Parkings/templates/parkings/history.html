{% extends "Parkings/base.html" %}
{% block content %}

<style>
/* T·ªïng th·ªÉ */
.filter-card {
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  padding: 20px 25px;
  margin-bottom: 25px;
  border-left: 5px solid #007bff;
}

/* B·ªô l·ªçc */
.filter-form input, 
.filter-form select {
  border-radius: 8px;
  border: 1px solid #ced4da;
  padding: 8px 12px;
  font-size: 14px;
  width: 160px;
  transition: all 0.3s ease;
}

.filter-form input:focus,
.filter-form select:focus {
  border-color: #007bff;
  box-shadow: 0 0 0 0.2rem rgba(0,123,255,0.25);
}

.filter-form button {
  border-radius: 8px;
  padding: 8px 20px;
  background: linear-gradient(135deg, #007bff, #00c6ff);
  border: none;
  color: #fff;
  font-weight: 600;
  transition: background 0.3s;
}

.filter-form button:hover {
  background: linear-gradient(135deg, #0056b3, #0096c7);
}

/* B·∫£ng d·ªØ li·ªáu */
.table-container {
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  padding: 20px;
}

.table thead {
  background: #007bff;
  color: #fff;
  text-align: center;
}

.table tbody tr:hover {
  background: rgba(0, 123, 255, 0.05);
  transition: 0.2s;
}

.status-active {
  color: #28a745;
  font-weight: 600;
}
.status-inactive {
  color: #dc3545;
  font-weight: 600;
}
</style>

<h2 class="mb-4 text-primary fw-bold"><i class="bi bi-clock-history"></i> L·ªãch s·ª≠ g·ª≠i xe</h2>

<div class="filter-card">
  <form method="get" class="filter-form d-flex flex-wrap gap-2 align-items-center">
      <input type="text" name="plate" placeholder="üîç Bi·ªÉn s·ªë" value="{{ filters.plate }}">
      <input type="text" name="card_id" placeholder="üí≥ M√£ th·∫ª" value="{{ filters.card_id }}">
      <select name="vehicle_type">
          <option value="">üöó Lo·∫°i xe</option>
          <option value="motorbike" {% if filters.vehicle_type == 'motorbike' %}selected{% endif %}>Xe m√°y</option>
          <option value="car" {% if filters.vehicle_type == 'car' %}selected{% endif %}>√î t√¥</option>
      </select>
      <select name="status">
          <option value="">üìã Tr·∫°ng th√°i</option>
          <option value="checked_in" {% if filters.status == 'checked_in' %}selected{% endif %}>C√≤n trong b√£i</option>
          <option value="checked_out" {% if filters.status == 'checked_out' %}selected{% endif %}>ƒê√£ ra</option>
      </select>
      <input type="date" name="start_date" value="{{ filters.start_date }}">
      <input type="date" name="end_date" value="{{ filters.end_date }}">
      <button type="submit">L·ªçc</button>
  </form>
</div>

<div class="table-container">
  <table class="table table-hover align-middle">
    <thead>
      <tr>
        <th>Bi·ªÉn s·ªë</th>
        <th>M√£ th·∫ª</th>
        <th>Lo·∫°i xe</th>
        <th>Th·ªùi gian v√†o</th>
        <th>Th·ªùi gian ra</th>
        <th>Tr·∫°ng th√°i</th>
      </tr>
    </thead>
    <tbody>
      {% for r in records %}
      <tr>
        <td class="fw-semibold">{{ r.plate_number }}</td>
        <td>{{ r.card.id }}</td>
        <td>{% if r.vehicle_type == "car" %}üöó √î t√¥{% else %}üèçÔ∏è Xe m√°y{% endif %}</td>
        <td>{{ r.check_in_time|date:"d/m/Y H:i" }}</td>
        <td>
          {% if r.check_out_time %}
            {{ r.check_out_time|date:"d/m/Y H:i" }}
          {% else %}
            <span class="text-secondary">‚Äî</span>
          {% endif %}
        </td>
        <td>
          {% if r.check_out_time %}
            <span class="status-inactive">ƒê√£ ra</span>
          {% else %}
            <span class="status-active">C√≤n trong b√£i</span>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="6" class="text-center text-muted py-3">
          üò¢ Kh√¥ng c√≥ b·∫£n ghi n√†o ph√π h·ª£p.
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}